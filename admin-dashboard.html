<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - VideoSat</title>
    <meta name="description" content="VideoSat Admin Dashboard - Üye ve sistem yönetimi">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin-dashboard.css">
    <link rel="stylesheet" href="styles-responsive-tables.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="config/backend-config.js"></script>
    <script src="services/responsive-tables.js"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="admin-navbar">
        <div class="admin-nav-container">
            <div class="admin-nav-brand">
                <i class="fas fa-shield-alt"></i>
                <span>Admin Dashboard</span>
            </div>
            <div class="admin-nav-menu">
                <a href="#dashboard" class="admin-nav-link active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
                <a href="#users" class="admin-nav-link" data-section="users">
                    <i class="fas fa-users"></i> Üyeler
                </a>
                <a href="#streams" class="admin-nav-link" data-section="streams">
                    <i class="fas fa-video"></i> Yayınlar
                </a>
                <a href="#statistics" class="admin-nav-link" data-section="statistics">
                    <i class="fas fa-chart-bar"></i> İstatistikler
                </a>
            </div>
            <div class="admin-nav-user">
                <span id="adminUserEmail">Admin</span>
                <button class="btn btn-outline btn-sm" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Çıkış
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="admin-main">
        <!-- Dashboard Section -->
        <section id="dashboard-section" class="admin-section active">
            <div class="admin-container">
                <h1 class="admin-title">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </h1>
                
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(34, 197, 94, 0.1); color: #22c55e;">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3 class="stat-value" id="statTotalUsers">0</h3>
                            <p class="stat-label">Toplam Üye</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(59, 130, 246, 0.1); color: #3b82f6;">
                            <i class="fas fa-video"></i>
                        </div>
                        <div class="stat-content">
                            <h3 class="stat-value" id="statTotalStreams">0</h3>
                            <p class="stat-label">Toplam Yayın</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 class="stat-value" id="statTotalErrors">0</h3>
                            <p class="stat-label">Hatalar (24s)</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <h3 class="stat-value" id="statActiveStreams">0</h3>
                            <p class="stat-label">Aktif Yayınlar</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="admin-card">
                    <h2 class="admin-card-title">Hızlı İşlemler</h2>
                    <div class="quick-actions">
                        <button class="btn btn-primary" onclick="showCreateUserModal()">
                            <i class="fas fa-user-plus"></i> Yeni Üye Ekle
                        </button>
                        <button class="btn btn-outline" onclick="exportUsers()">
                            <i class="fas fa-download"></i> Üye Export
                        </button>
                        <button class="btn btn-outline" onclick="refreshStats()">
                            <i class="fas fa-sync-alt"></i> Yenile
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Users Section -->
        <section id="users-section" class="admin-section">
            <div class="admin-container">
                <div class="admin-header">
                    <h1 class="admin-title">
                        <i class="fas fa-users"></i> Üye Yönetimi
                    </h1>
                    <button class="btn btn-primary" onclick="showCreateUserModal()">
                        <i class="fas fa-user-plus"></i> Yeni Üye
                    </button>
                </div>

                <!-- Filters -->
                <div class="admin-card">
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label>Ara</label>
                            <input type="text" id="userSearch" class="form-input" placeholder="Email, şirket adı...">
                        </div>
                        <div class="filter-group">
                            <label>Rol</label>
                            <select id="userRoleFilter" class="form-select">
                                <option value="">Tüm Roller</option>
                                <option value="satici">Satıcı</option>
                                <option value="musteri">Müşteri</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Durum</label>
                            <select id="userStatusFilter" class="form-select">
                                <option value="">Tüm Durumlar</option>
                                <option value="active">Aktif</option>
                                <option value="inactive">Pasif</option>
                                <option value="banned">Banlı</option>
                                <option value="suspended">Askıda</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <button class="btn btn-primary" onclick="applyFilters()">
                                <i class="fas fa-search"></i> Filtrele
                            </button>
                            <button class="btn btn-outline" onclick="resetFilters()">
                                <i class="fas fa-redo"></i> Sıfırla
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Users Table -->
                <div class="admin-card">
                    <div class="table-container">
                        <table class="admin-table responsive-table" id="usersTable">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" id="selectAllUsers"></th>
                                    <th>Email</th>
                                    <th>Şirket</th>
                                    <th>Rol</th>
                                    <th>Durum</th>
                                    <th>Kayıt Tarihi</th>
                                    <th>Son Giriş</th>
                                    <th>İşlemler</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <tr>
                                    <td colspan="8" class="text-center">
                                        <div class="loading-spinner"></div>
                                        Yükleniyor...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <div class="pagination" id="usersPagination">
                        <!-- Pagination will be inserted here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Streams Section -->
        <section id="streams-section" class="admin-section">
            <div class="admin-container">
                <h1 class="admin-title">
                    <i class="fas fa-video"></i> Yayın Yönetimi
                </h1>
                <div class="admin-card">
                    <p>Yayın yönetimi yakında eklenecek...</p>
                </div>
            </div>
        </section>

        <!-- Statistics Section -->
        <section id="statistics-section" class="admin-section">
            <div class="admin-container">
                <h1 class="admin-title">
                    <i class="fas fa-chart-bar"></i> İstatistikler
                </h1>
                <div class="admin-card">
                    <p>Detaylı istatistikler yakında eklenecek...</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Create User Modal -->
    <div id="createUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Yeni Üye Ekle</h2>
                <button class="modal-close" onclick="closeModal('createUserModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="createUserForm" onsubmit="handleCreateUser(event)">
                <div class="form-group">
                    <label>E-posta *</label>
                    <input type="email" id="createUserEmail" class="form-input" required>
                </div>
                <div class="form-group">
                    <label>Şifre *</label>
                    <input type="password" id="createUserPassword" class="form-input" required>
                </div>
                <div class="form-group">
                    <label>Şirket Adı *</label>
                    <input type="text" id="createUserCompany" class="form-input" required>
                </div>
                <div class="form-group">
                    <label>Rol *</label>
                    <select id="createUserRole" class="form-select" required>
                        <option value="satici">Satıcı</option>
                        <option value="musteri">Müşteri</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ad</label>
                    <input type="text" id="createUserFirstName" class="form-input">
                </div>
                <div class="form-group">
                    <label>Soyad</label>
                    <input type="text" id="createUserLastName" class="form-input">
                </div>
                <div class="form-group">
                    <label>Telefon</label>
                    <input type="tel" id="createUserPhone" class="form-input">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('createUserModal')">
                        İptal
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Kaydet
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div id="editUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Üye Düzenle</h2>
                <button class="modal-close" onclick="closeModal('editUserModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="editUserForm" onsubmit="handleEditUser(event)">
                <input type="hidden" id="editUserEmail">
                <div class="form-group">
                    <label>Şirket Adı</label>
                    <input type="text" id="editUserCompany" class="form-input">
                </div>
                <div class="form-group">
                    <label>Rol</label>
                    <select id="editUserRole" class="form-select">
                        <option value="satici">Satıcı</option>
                        <option value="musteri">Müşteri</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Durum</label>
                    <select id="editUserStatus" class="form-select">
                        <option value="active">Aktif</option>
                        <option value="inactive">Pasif</option>
                        <option value="banned">Banlı</option>
                        <option value="suspended">Askıda</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ad</label>
                    <input type="text" id="editUserFirstName" class="form-input">
                </div>
                <div class="form-group">
                    <label>Soyad</label>
                    <input type="text" id="editUserLastName" class="form-input">
                </div>
                <div class="form-group">
                    <label>Telefon</label>
                    <input type="tel" id="editUserPhone" class="form-input">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('editUserModal')">
                        İptal
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Kaydet
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="services/admin-dashboard-service.js"></script>
    <script src="admin-dashboard.js"></script>
</body>
</html>


